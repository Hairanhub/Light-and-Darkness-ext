<!DOCTYPE html>
<html lang="pt-br">
<head>
  <script src="https://unpkg.com/@owlbear-rodeo/sdk"></script>
  <style>
    body { font-family: sans-serif; color: white; background: #242424; padding: 10px; }
    #messages { height: 150px; overflow-y: auto; border: 1px solid #555; margin-bottom: 10px; padding: 5px; }
    input { width: 70%; }
  </style>
</head>
<body>
  ### Mini Chat Teste
  <div id="messages"></div>
  <input type="text" id="chatInput" placeholder="Digite algo...">
  <button onclick="sendMessage()">Enviar</button>

  <script>
    const OBR = window.OBR;

    // Inicializa a extensão
    OBR.onReady(() => {
      console.log("Extensão pronta!");
      
      // Escuta por mensagens recebidas de outros jogadores
      OBR.party.onChatMessage((message) => {
        const msgDiv = document.getElementById('messages');
        msgDiv.innerHTML += `<p><b>${message.senderName}:</b> ${message.text}</p>`;
      });
    });

    // Função para enviar a mensagem
    async function sendMessage() {
      const input = document.getElementById('chatInput');
      const text = input.value;
      
      if (text) {
        // Envia para todos na sala (incluindo você)
        await OBR.party.sendChatMessage(text);
        input.value = ''; 
      }
    }
  </script>
</body>
</html>
